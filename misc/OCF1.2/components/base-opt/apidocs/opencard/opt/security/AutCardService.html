<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc on Mon Jan 17 10:03:11 GMT+01:00 2000 -->
<TITLE>
: Interface  AutCardService
</TITLE>
<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">
</HEAD>
<BODY BGCOLOR="white">

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_top"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" ID="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT ID="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="package-summary.html"><FONT ID="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" ID="NavBarCell1Rev"> &nbsp;<FONT ID="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="package-tree.html"><FONT ID="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT ID="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="../../../index-all.html"><FONT ID="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT ID="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" ID="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../opencard/opt/security/CHVCardService.html"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" ID="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="AutCardService.html" TARGET="_top"><B>NO FRAMES</B></A></FONT></TD>
</TR>
<TR>
<TD VALIGN="top" ID="NavBarCell3"><FONT SIZE="-2">
  SUMMARY: &nbsp;INNER&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" ID="NavBarCell3"><FONT SIZE="-2">
DETAIL: &nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
opencard.opt.security</FONT>
<BR>
Interface  AutCardService</H2>
<HR>
<DL>
<DT>public abstract interface <B>AutCardService</B><DT>extends <A HREF="../../../opencard/opt/service/CardServiceInterface.html">CardServiceInterface</A></DL>

<P>
<HR>

<P>
<!-- ======== INNER CLASS SUMMARY ======== -->


<!-- =========== FIELD SUMMARY =========== -->


<!-- ======== CONSTRUCTOR SUMMARY ======== -->


<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" ID="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Method Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" ID="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../opencard/opt/security/AutCardService.html#closeApplication(opencard.opt.security.SecurityDomain)">closeApplication</A></B>(<A HREF="../../../opencard/opt/security/SecurityDomain.html">SecurityDomain</A>&nbsp;domain)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Resets the achieved external authentications on the smartcard.
 </TD>
</TR>
<TR BGCOLOR="white" ID="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../opencard/opt/security/AutCardService.html#externalAuthenticate(opencard.opt.security.KeyRef, opencard.opt.security.SignCredential)">externalAuthenticate</A></B>(<A HREF="../../../opencard/opt/security/KeyRef.html">KeyRef</A>&nbsp;keyref,
                     <A HREF="../../../opencard/opt/security/SignCredential.html">SignCredential</A>&nbsp;credential)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Performs an external authentication against the smartcard.
 </TD>
</TR>
<TR BGCOLOR="white" ID="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../opencard/opt/security/AutCardService.html#getChallengeLength(opencard.opt.security.KeyRef)">getChallengeLength</A></B>(<A HREF="../../../opencard/opt/security/KeyRef.html">KeyRef</A>&nbsp;key)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Determines the required length of a challenge for internal authentication.
 </TD>
</TR>
<TR BGCOLOR="white" ID="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;byte[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../opencard/opt/security/AutCardService.html#internalAuthenticate(opencard.opt.security.KeyRef, byte[])">internalAuthenticate</A></B>(<A HREF="../../../opencard/opt/security/KeyRef.html">KeyRef</A>&nbsp;keyref,
                     byte[]&nbsp;challenge)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Requests an internal authentication from the smartcard.
 </TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_opencard.opt.service.CardServiceInterface"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#EEEEFF" ID="TableSubHeadingColor">
<TD><B>Methods inherited from interface opencard.opt.service.<A HREF="../../../opencard/opt/service/CardServiceInterface.html">CardServiceInterface</A></B></TD>
</TR>
<TR BGCOLOR="white" ID="TableRowColor">
<TD><CODE><A HREF="../../../opencard/opt/service/CardServiceInterface.html#getCard()">getCard</A>, 
<A HREF="../../../opencard/opt/service/CardServiceInterface.html#setCHVDialog(opencard.core.service.CHVDialog)">setCHVDialog</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->


<!-- ========= CONSTRUCTOR DETAIL ======== -->


<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" ID="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Method Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="getChallengeLength(opencard.opt.security.KeyRef)"><!-- --></A><H3>
getChallengeLength</H3>
<PRE>
public int <B>getChallengeLength</B>(<A HREF="../../../opencard/opt/security/KeyRef.html">KeyRef</A>&nbsp;key)
                       throws opencard.core.service.CardServiceException,
                              opencard.core.terminal.CardTerminalException</PRE>
<DL>
<DD>Determines the required length of a challenge for internal authentication.
 The terminal or host application can then prepare a random challenge of
 the given length to invoke <tt>internalAuthenticate</tt>.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>keyref</CODE> - a reference identifying the key to be used for
                    internal authentication in a subsequent invocation<DT><B>Returns:</B><DD>the number of bytes in an appropriate random challenge.
            The card may be able to deal with other sizes of random
            challenges. For example, if a public key algorithm is
            used, the card may be able to pad shorter challenges to
            the required block length. The value returned here could
            the be the maximum length that a random challenge may have.
            For secret key algorithms, the value returned typically
            is the block size, and no other sizes are acceptable.<DT><B>Throws:</B><DD>opencard.core.service.CardServiceException - if this service encountered an error.
            This may occur if the service needs to contact the smartcard
            in order to determine the challenge length. An exception may
            also be thrown if the service is unable to locate the security
            domain.<DD>opencard.core.terminal.CardTerminalException - if the underlying card terminal encountered an error
            when communicating with the smartcard</DL>
</DD>
</DL>
<HR>

<A NAME="internalAuthenticate(opencard.opt.security.KeyRef, byte[])"><!-- --></A><H3>
internalAuthenticate</H3>
<PRE>
public byte[] <B>internalAuthenticate</B>(<A HREF="../../../opencard/opt/security/KeyRef.html">KeyRef</A>&nbsp;keyref,
                                   byte[]&nbsp;challenge)
                            throws opencard.core.service.CardServiceException,
                                   opencard.core.terminal.CardTerminalException</PRE>
<DL>
<DD>Requests an internal authentication from the smartcard.
 The smartcard will take the random challenge passed as argument,
 perform some operations involving a secret, and return the result
 of these operations. The terminal or host application can then
 check the result to verify that the secret used by the card is
 the expected one, thereby authenticating the card.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>keyref</CODE> - a reference identifying the key to be used for
                    internal authentication<DD><CODE>challenge</CODE> - the random challenge to be used by the smartcard<DT><B>Returns:</B><DD>a byte array holding the result of the smartcard's operations.
            It is up to the application to verify that this result is the
            expected one. (You wouldn't want to trust a smartcard just
            because this method returned <tt>true</tt>, would you?)<DT><B>Throws:</B><DD>opencard.core.service.CardServiceException - if this service encountered an error<DD>opencard.core.terminal.CardTerminalException - if the underlying card terminal encountered an error
            when communicating with the smartcard</DL>
</DD>
</DL>
<HR>

<A NAME="externalAuthenticate(opencard.opt.security.KeyRef, opencard.opt.security.SignCredential)"><!-- --></A><H3>
externalAuthenticate</H3>
<PRE>
public boolean <B>externalAuthenticate</B>(<A HREF="../../../opencard/opt/security/KeyRef.html">KeyRef</A>&nbsp;keyref,
                                    <A HREF="../../../opencard/opt/security/SignCredential.html">SignCredential</A>&nbsp;credential)
                             throws opencard.core.service.CardServiceException,
                                    opencard.core.terminal.CardTerminalException</PRE>
<DL>
<DD>Performs an external authentication against the smartcard.
 The smartcard will provide a random challenge, which is signed
 using the credential passed as an argument. The result of this
 operation is sent back to the smartcard and verified there.
 If the credential provided by the terminal or host application
 is the one expected by the smartcard, the external authentication
 succeeds. Otherwise, it fails. Note that repeated failed attempts
 to authenticate may cause the smartcard to permanently block the
 key that is used to check the authentication.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>keyref</CODE> - a reference identifying the key to be used for
                    external authentication<DD><CODE>credential</CODE> - the secret to be used to authenticate the application
                    against the smartcard. The secret will be used only
                    once, and before this method returns. The application
                    may take actions to ensure that the secret cannot be
                    used arbitrarily often, or after this method returned.<DT><B>Returns:</B><DD><tt>true</tt> if the smartcard accepted the credential and
            therefore considers the outside world to be authenticated,
            <tt>false</tt> if the smartcard rejected to authenticate
            the outside world.<DT><B>Throws:</B><DD>opencard.core.service.CardServiceException - if this service encountered an error. In this context, it
            is not considered an error if the smartcard rejected the
            authentication. However, an exception will be thrown if the
            referred key on the smartcard is blocked so that authentication
            using this key becomes impossible.<DD>opencard.core.terminal.CardTerminalException - if the underlying card terminal encountered an error
            when communicating with the smartcard</DL>
</DD>
</DL>
<HR>

<A NAME="closeApplication(opencard.opt.security.SecurityDomain)"><!-- --></A><H3>
closeApplication</H3>
<PRE>
public void <B>closeApplication</B>(<A HREF="../../../opencard/opt/security/SecurityDomain.html">SecurityDomain</A>&nbsp;domain)
                      throws opencard.core.service.CardServiceException,
                             opencard.core.terminal.CardTerminalException</PRE>
<DL>
<DD>Resets the achieved external authentications on the smartcard.
 Typically, other permanent access conditions that have been satisfied
 will also be reset. If the card does not allow to reset access
 conditions for a specific application, it is expected that <i>all</i>
 access conditions for all on-card applications are reset.

 <p>
 The name of this method implies that an application on the smartcard
 is first selected and then <i>opened</i> by performing external
 authentication, giving access to the application data. By resetting the
 external authentication, the on-card application therefore gets
 <tt>closed</tt>.

 <p>
 External authentication as well as Card Holder Verification (CHV) can
 be required to satisfy access conditions that are imposed by the card.
 The operation expected to be performed when invoking this method is to
 reset the state in the smartcard so that these access conditions are no
 longer satisfied. This avoids that another terminal or host application
 accesses the smartcard's data without proving it's authorization first.
 The signature of the method here is the same as in the interface
 <tt>CHVCardService</tt>, since both are expected to do the same thing.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>domain</CODE> - the security domain for which to reset external
                    authentications<DT><B>Throws:</B><DD>opencard.core.service.CardServiceException - if this service, or the underlying implementation,
            encountered an error<DD>opencard.core.terminal.CardTerminalException - if the underlying terminal encountered an error while
            communicating with the smartcard<DT><B>See Also: </B><DD><A HREF="../../../opencard/opt/security/CHVCardService.html#closeApplication(opencard.opt.security.SecurityDomain)"><CODE>CHVCardService.closeApplication(opencard.opt.security.SecurityDomain)</CODE></A></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_bottom"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" ID="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT ID="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="package-summary.html"><FONT ID="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" ID="NavBarCell1Rev"> &nbsp;<FONT ID="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="package-tree.html"><FONT ID="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT ID="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="../../../index-all.html"><FONT ID="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT ID="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" ID="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../opencard/opt/security/CHVCardService.html"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" ID="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="AutCardService.html" TARGET="_top"><B>NO FRAMES</B></A></FONT></TD>
</TR>
<TR>
<TD VALIGN="top" ID="NavBarCell3"><FONT SIZE="-2">
  SUMMARY: &nbsp;INNER&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" ID="NavBarCell3"><FONT SIZE="-2">
DETAIL: &nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->

<HR>

</BODY>
</HTML>
