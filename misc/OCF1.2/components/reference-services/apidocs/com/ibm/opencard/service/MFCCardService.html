<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc on Thu Dec 02 15:53:48 GMT+01:00 1999 -->
<TITLE>
: Class  MFCCardService
</TITLE>
<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">
</HEAD>
<BODY BGCOLOR="white">

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_top"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" ID="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT ID="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="package-summary.html"><FONT ID="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" ID="NavBarCell1Rev"> &nbsp;<FONT ID="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="package-tree.html"><FONT ID="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT ID="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT ID="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT ID="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" ID="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../com/ibm/opencard/service/MFCCardObjectInfoCache.html"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../com/ibm/opencard/service/MFCCardServiceParameter.html"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" ID="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="MFCCardService.html" TARGET="_top"><B>NO FRAMES</B></A></FONT></TD>
</TR>
<TR>
<TD VALIGN="top" ID="NavBarCell3"><FONT SIZE="-2">
  SUMMARY: &nbsp;INNER&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" ID="NavBarCell3"><FONT SIZE="-2">
DETAIL: &nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
com.ibm.opencard.service</FONT>
<BR>
Class  MFCCardService</H2>
<PRE>
java.lang.Object
  |
  +--opencard.core.service.CardService
        |
        +--<B>com.ibm.opencard.service.MFCCardService</B>
</PRE>
<DL>
<DT><B>Direct Known Subclasses:</B> <DD><A HREF="../../../../com/ibm/opencard/isofs/MFCFileAccess.html">MFCFileAccess</A>, <A HREF="../../../../com/ibm/opencard/script/MFCScriptService.html">MFCScriptService</A>, <A HREF="../../../../com/ibm/opencard/signature/MFCSignatureService.html">MFCSignatureService</A></DD>
</DL>
<HR>
<DL>
<DT>public abstract class <B>MFCCardService</B><DT>extends opencard.core.service.CardService<DT>implements opencard.opt.security.SecureService</DL>

<P>
The base class for all MFC card services.
 It provides channel allocation and key information handling,
 both not directly related to but required by card services.
 The only card service actually provided in this class is the
 <tt>select</tt> command, which is protected and will be used
 by derived services. The rest defines the infrastructure for
 card services.

 <p>
 The select command implemented by MFC smartcards is rather tricky.
 The implementation of the select command in <tt>MFC35CardServiceImpl</tt>
 makes some assumptions on the card layout. These are <i>common sense</i>
 assumptions that should not affect existing or future layouts. They
 are mentioned here anyway, to save the time of those people that like
 to check the behaviour of programs under strange circumstances.
 <br>
 A file ID that has to be interpreted by the select command of an MFC
 smartcard will be checked to be an EF or DF within the current DF, to
 be the parent DF, or the current DF itself. The MFC card services
 assume that the file ID of the parent DF, the current DF, and all EFs
 and DFs within the current directory are distinct.
 <br>
 <A NAME="ref1">
 For MFC smartcards that support selection by application names, it is
 further assumed that application names and the location of the respective
 files are defined only in the MF. Subapplications are not supported.
<P>
<HR>

<P>
<!-- ======== INNER CLASS SUMMARY ======== -->


<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" ID="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Field Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" ID="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/ibm/opencard/service/MFCCardService.html#card_type">card_type</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Type of card for which this service is customized</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" ID="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" ID="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected </CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/ibm/opencard/service/MFCCardService.html#MFCCardService()">MFCCardService</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates a new MFC card service.
 </TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" ID="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Method Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" ID="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/ibm/opencard/service/MFCCardService.html#allocateCardChannel()">allocateCardChannel</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Allocates a card channel.
 </TD>
</TR>
<TR BGCOLOR="white" ID="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/ibm/opencard/service/MFCCardService.html#checkFileArg(opencard.opt.iso.fs.CardFilePath)">checkFileArg</A></B>(opencard.opt.iso.fs.CardFilePath&nbsp;file)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checks whether the given path is <tt>null<tt>.
 </TD>
</TR>
<TR BGCOLOR="white" ID="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../com/ibm/opencard/service/MFCCardChannel.html">MFCCardChannel</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/ibm/opencard/service/MFCCardService.html#getMFCChannel()">getMFCChannel</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the MFC channel to use.
 </TD>
</TR>
<TR BGCOLOR="white" ID="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;opencard.opt.iso.fs.CardFilePath</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/ibm/opencard/service/MFCCardService.html#getRoot()">getRoot</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a path to the master file of the smartcard.
 </TD>
</TR>
<TR BGCOLOR="white" ID="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/ibm/opencard/service/MFCCardService.html#initGeneric(com.ibm.opencard.service.MFCCardServiceParameter)">initGeneric</A></B>(<A HREF="../../../../com/ibm/opencard/service/MFCCardServiceParameter.html">MFCCardServiceParameter</A>&nbsp;parameter)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Initializes this service from encapsulated parameters.
 </TD>
</TR>
<TR BGCOLOR="white" ID="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/ibm/opencard/service/MFCCardService.html#initialize(opencard.core.service.CardServiceScheduler, opencard.core.service.SmartCard, boolean)">initialize</A></B>(opencard.core.service.CardServiceScheduler&nbsp;scheduler,
           opencard.core.service.SmartCard&nbsp;smartcard,
           boolean&nbsp;blocking)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Does not initialize this service.
 </TD>
</TR>
<TR BGCOLOR="white" ID="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/ibm/opencard/service/MFCCardService.html#provideCredentials(opencard.opt.security.SecurityDomain, opencard.opt.security.CredentialBag)">provideCredentials</A></B>(opencard.opt.security.SecurityDomain&nbsp;domain,
                   opencard.opt.security.CredentialBag&nbsp;credbag)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Provides the credentials for a key domain.
 </TD>
</TR>
<TR BGCOLOR="white" ID="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/ibm/opencard/service/MFCCardService.html#releaseCardChannel()">releaseCardChannel</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Releases the allocated card channel.
 </TD>
</TR>
<TR BGCOLOR="white" ID="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../com/ibm/opencard/service/MFCCardObjectInfo.html">MFCCardObjectInfo</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/ibm/opencard/service/MFCCardService.html#selectObject(com.ibm.opencard.service.MFCCardChannel, opencard.opt.iso.fs.CardFilePath, boolean)">selectObject</A></B>(<A HREF="../../../../com/ibm/opencard/service/MFCCardChannel.html">MFCCardChannel</A>&nbsp;channel,
             opencard.opt.iso.fs.CardFilePath&nbsp;path,
             boolean&nbsp;info)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Selects an object on the smartcard.
 </TD>
</TR>
<TR BGCOLOR="white" ID="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/ibm/opencard/service/MFCCardService.html#setCHVDialog(opencard.core.service.CHVDialog)">setCHVDialog</A></B>(opencard.core.service.CHVDialog&nbsp;dialog)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets an application-defined CHV dialog.</TD>
</TR>
<TR BGCOLOR="white" ID="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/ibm/opencard/service/MFCCardService.html#setParentChannel(com.ibm.opencard.service.MFCCardChannel)">setParentChannel</A></B>(<A HREF="../../../../com/ibm/opencard/service/MFCCardChannel.html">MFCCardChannel</A>&nbsp;channel)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Provides a channel to use, without setting the accessor.
 </TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_opencard.core.service.CardService"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#EEEEFF" ID="TableSubHeadingColor">
<TD><B>Methods inherited from class opencard.core.service.CardService</B></TD>
</TR>
<TR BGCOLOR="white" ID="TableRowColor">
<TD><CODE>getCard, 
getCardChannel, 
getCHVDialog, 
setCardChannel</CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#EEEEFF" ID="TableSubHeadingColor">
<TD><B>Methods inherited from class java.lang.Object</B></TD>
</TR>
<TR BGCOLOR="white" ID="TableRowColor">
<TD><CODE>clone, 
equals, 
finalize, 
getClass, 
hashCode, 
notify, 
notifyAll, 
toString, 
wait, 
wait, 
wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" ID="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Field Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="card_type"><!-- --></A><H3>
card_type</H3>
<PRE>
protected int <B>card_type</B></PRE>
<DL>
<DD>Type of card for which this service is customized</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" ID="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="MFCCardService()"><!-- --></A><H3>
MFCCardService</H3>
<PRE>
protected <B>MFCCardService</B>()</PRE>
<DL>
<DD>Creates a new MFC card service.
 The service cannot be used immediately. The actual initialization
 is triggered by an invocation of <tt>initialize</tt>.</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" ID="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Method Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="initialize(opencard.core.service.CardServiceScheduler, opencard.core.service.SmartCard, boolean)"><!-- --></A><H3>
initialize</H3>
<PRE>
protected void <B>initialize</B>(opencard.core.service.CardServiceScheduler&nbsp;scheduler,
                          opencard.core.service.SmartCard&nbsp;smartcard,
                          boolean&nbsp;blocking)
                   throws opencard.core.service.CardServiceException</PRE>
<DL>
<DD>Does not initialize this service.
 In the base class <tt>CardService</tt>, this method is provided as
 an entry point for extended initializations. For MFC card services,
 initialization is done in hierachically invoked methods named
 <tt>initXXX</tt>, where XXX indicates the service class. The
 initialization method for this class is <tt>initGeneric</tt>.
 <br>
 Every MFC card service class has to override this method. The
 implementation creates a parameter object suitable for the derived
 class and invokes the single-argument initialization method for
 that class. That method will initialize the local class attributes
 from the parameter and invoke the single-argument initialization
 method for the base class.
 <br>
 Since this class is abstract, the initialization method here cannot
 create an appropriate parameter object. Instead, it throws an
 exception indicating that the developer of the derived service
 made a programming error.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>scheduler</CODE> - where to allocate channels<DD><CODE>smartcard</CODE> - which smartcard to contact<DD><CODE>blocking</CODE> - whether operation shall be blocking<DT><B>Throws:</B><DD>opencard.core.service.CardServiceException - if this method is invoked<DT><B>Overrides:</B><DD>initialize in class opencard.core.service.CardService<DT><B>See Also: </B><DD><CODE>CardService</CODE>, 
<CODE>CardService.initialize(opencard.core.service.CardServiceScheduler, opencard.core.service.SmartCard, boolean)</CODE>, 
<A HREF="../../../../com/ibm/opencard/service/MFCCardService.html#initGeneric(com.ibm.opencard.service.MFCCardServiceParameter)"><CODE>initGeneric(com.ibm.opencard.service.MFCCardServiceParameter)</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="initGeneric(com.ibm.opencard.service.MFCCardServiceParameter)"><!-- --></A><H3>
initGeneric</H3>
<PRE>
protected final void <B>initGeneric</B>(<A HREF="../../../../com/ibm/opencard/service/MFCCardServiceParameter.html">MFCCardServiceParameter</A>&nbsp;parameter)
                          throws opencard.core.service.CardServiceException</PRE>
<DL>
<DD>Initializes this service from encapsulated parameters.
 This method initializes the local attributes and invokes
 <tt>initialize</tt> in the base class. It has to be invoked
 by each MFC card service. The parameters are encapsulated
 in an object of class <tt>MFCCardServiceParameter</tt>.
 Derived services should derive their own parameter classes
 from that to add more initialization arguments.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>parameter</CODE> - an object encapsulating the parameters to this service<DT><B>Throws:</B><DD>opencard.core.service.CardServiceException - if the initialization failed.
            With the current implementation, this cannot happen.<DT><B>See Also: </B><DD><A HREF="../../../../com/ibm/opencard/service/MFCCardServiceParameter.html"><CODE>MFCCardServiceParameter</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="setParentChannel(com.ibm.opencard.service.MFCCardChannel)"><!-- --></A><H3>
setParentChannel</H3>
<PRE>
public final void <B>setParentChannel</B>(<A HREF="../../../../com/ibm/opencard/service/MFCCardChannel.html">MFCCardChannel</A>&nbsp;channel)</PRE>
<DL>
<DD>Provides a channel to use, without setting the accessor.
 This method is invoked by meta services, that is services that use
 other services to do their job. A meta service will want to provide
 a channel with the meta service's accessor. Unlike with the method
 <tt>setCardChannel</tt>, the card service will not store it's own
 accessor into the channel provided here. To unset the parent channel,
 invoke this method with argument <tt>null</tt>.
 <br>
 This method may be used simultaneously with <tt>setCardChannel</tt>,
 which is invoked by <tt>SmartCard.beginMutex</tt> and
 <tt>SmartCard.endMutex</tt>. The channel provided here will take
 precedence over the channel provided with <tt>setCardChannel</tt>.
 Typically, the channels will be the same anyway, but a channel
 provided via <tt>setCardChannel</tt> will be instrumented with the
 service's own accessor.
 <br>
 Neither the use of <tt>setCardChannel</tt> nor the use of this method
 relief a card service from using the allocation methods embracing
 card accesses, as described in <tt>CardService</tt>. By convention,
 this method is invoked only from outside the service it is invoked
 on. This implies that no channel is currently explicitly allocated
 by the service.<DD><DL>
<DT><B>See Also: </B><DD><CODE>CardService.setCardChannel(opencard.core.service.CardChannel)</CODE>, 
<CODE>SmartCard.beginMutex()</CODE>, 
<CODE>SmartCard.endMutex()</CODE>, 
<A HREF="../../../../com/ibm/opencard/service/MFCCardService.html#allocateCardChannel()"><CODE>allocateCardChannel()</CODE></A>, 
<A HREF="../../../../com/ibm/opencard/service/MFCCardService.html#releaseCardChannel()"><CODE>releaseCardChannel()</CODE></A>, 
<CODE>CardService</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getMFCChannel()"><!-- --></A><H3>
getMFCChannel</H3>
<PRE>
protected final <A HREF="../../../../com/ibm/opencard/service/MFCCardChannel.html">MFCCardChannel</A> <B>getMFCChannel</B>()</PRE>
<DL>
<DD>Returns the MFC channel to use.
 This method usually returns the same channel as <tt>getCardChannel</tt>
 in the base class, but the type of the channel is more specific, thus
 saving downcasts.<DD><DL>
<DT><B>Returns:</B><DD>the card channel that has been allocated<DT><B>See Also: </B><DD><CODE>CardService.getCardChannel()</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="setCHVDialog(opencard.core.service.CHVDialog)"><!-- --></A><H3>
setCHVDialog</H3>
<PRE>
public final void <B>setCHVDialog</B>(opencard.core.service.CHVDialog&nbsp;dialog)</PRE>
<DL>
<DD>Sets an application-defined CHV dialog.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>dialog</CODE> - the dialog to use for CHV input<DT><B>Overrides:</B><DD>setCHVDialog in class opencard.core.service.CardService</DL>
</DD>
</DL>
<HR>

<A NAME="getRoot()"><!-- --></A><H3>
getRoot</H3>
<PRE>
public final opencard.opt.iso.fs.CardFilePath <B>getRoot</B>()</PRE>
<DL>
<DD>Returns a path to the master file of the smartcard.
 This method is required by the interface <tt>FileAccessCardService</tt>.
 Since paths are considered to be object identifiers, not only file
 identifiers, it is offered in this base class.<DD><DL>
<DT><B>Returns:</B><DD>a path to the root of the file system<DT><B>See Also: </B><DD><CODE>FileAccessCardService.getRoot()</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="allocateCardChannel()"><!-- --></A><H3>
allocateCardChannel</H3>
<PRE>
protected final void <B>allocateCardChannel</B>()
                                  throws opencard.core.service.InvalidCardChannelException</PRE>
<DL>
<DD>Allocates a card channel.
 After allocation, the accessor gets stored in the channel, unless the
 channel was provided via <tt>setParentChannel</tt>. In this case, the
 service providing the channel will have set the accessor to use.
 CHV, authentication and secure messaging are therefore transparent
 to this service or service implementation.
 <br>
 The transparency gets lost if the CardOS requires commands to be
 sent without intervening commands. This is the case for some of
 the signature commands of the MFC 4.0 and 4.21 smartcards.<DD><DL>
<DT><B>Overrides:</B><DD>allocateCardChannel in class opencard.core.service.CardService<DT><B>See Also: </B><DD><A HREF="../../../../com/ibm/opencard/service/MFCCardService.html#releaseCardChannel()"><CODE>releaseCardChannel()</CODE></A>, 
<A HREF="../../../../com/ibm/opencard/service/MFCCardService.html#setParentChannel(com.ibm.opencard.service.MFCCardChannel)"><CODE>setParentChannel(com.ibm.opencard.service.MFCCardChannel)</CODE></A>, 
<A HREF="../../../../com/ibm/opencard/access/MFCCardAccessor.html"><CODE>MFCCardAccessor</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="releaseCardChannel()"><!-- --></A><H3>
releaseCardChannel</H3>
<PRE>
protected final void <B>releaseCardChannel</B>()
                                 throws opencard.core.service.InvalidCardChannelException</PRE>
<DL>
<DD>Releases the allocated card channel.
 The accessor stored in the channel after allocation will be cleared,
 unless the channel was provided via <tt>setParentChannel</tt>. In this
 case, it has not been instrumented with this service's accessor.
 Any way, the next service to use the channel will not be able to use
 the credentials stored in this service's accessor.
 <br>
 If this method is invoked while no channel is allocated, it simply
 returns. This behavior is required to put the release invocation in
 the <tt>finally</tt> clause of a <tt>try</tt> statement. The allocation
 could fail and throw an exception, which should not lead to another
 exception being thrown in the <tt>finally</tt> block.<DD><DL>
<DT><B>Overrides:</B><DD>releaseCardChannel in class opencard.core.service.CardService<DT><B>See Also: </B><DD><A HREF="../../../../com/ibm/opencard/service/MFCCardService.html#allocateCardChannel()"><CODE>allocateCardChannel()</CODE></A>, 
<A HREF="../../../../com/ibm/opencard/service/MFCCardService.html#setParentChannel(com.ibm.opencard.service.MFCCardChannel)"><CODE>setParentChannel(com.ibm.opencard.service.MFCCardChannel)</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="checkFileArg(opencard.opt.iso.fs.CardFilePath)"><!-- --></A><H3>
checkFileArg</H3>
<PRE>
protected final void <B>checkFileArg</B>(opencard.opt.iso.fs.CardFilePath&nbsp;file)</PRE>
<DL>
<DD>Checks whether the given path is <tt>null<tt>.
 This method is used for parameter checking in derived services.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>file</CODE> - the path to check for <tt>null</tt><DT><B>Throws:</B><DD>opencard.core.service.CardServiceInvalidParameterException - if the parameter is <tt>null</tt></DL>
</DD>
</DL>
<HR>

<A NAME="selectObject(com.ibm.opencard.service.MFCCardChannel, opencard.opt.iso.fs.CardFilePath, boolean)"><!-- --></A><H3>
selectObject</H3>
<PRE>
protected final <A HREF="../../../../com/ibm/opencard/service/MFCCardObjectInfo.html">MFCCardObjectInfo</A> <B>selectObject</B>(<A HREF="../../../../com/ibm/opencard/service/MFCCardChannel.html">MFCCardChannel</A>&nbsp;channel,
                                               opencard.opt.iso.fs.CardFilePath&nbsp;path,
                                               boolean&nbsp;info)
                                        throws opencard.opt.service.CardServiceObjectNotAvailableException,
                                               opencard.opt.service.CardServiceUnexpectedResponseException,
                                               opencard.core.terminal.CardTerminalException</PRE>
<DL>
<DD>Selects an object on the smartcard.
 This method is called by derived services. Unlike the typical
 service methods in derived services, this method expects a channel
 to be allocated and passed as argument. The third argument specifies
 whether information about the selected object should be returned, or
 whether the select can be done quietly. The smartcard's response is
 interpreted using the <tt>MFCSelectResponseParser</tt> passed to the
 constructor.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>channel</CODE> - contact to the smartcard<DD><CODE>path</CODE> - target of the select<DD><CODE>info</CODE> - <tt>true</tt> if the object info is required<DT><B>Returns:</B><DD>information about the selected object,
         if <tt>info</tt> was <tt>true</tt> and nothing went wrong<DT><B>Throws:</B><DD>opencard.opt.service.CardServiceObjectNotAvailableException - if the target could not be selected<DD>opencard.opt.service.CardServiceUnexpectedResponseException - if the select response could not be interpreted<DD>opencard.core.terminal.CardTerminalException - if the terminal encountered an error<DT><B>See Also: </B><DD><A HREF="../../../../com/ibm/opencard/service/MFCSelectResponseParser.html"><CODE>MFCSelectResponseParser</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="provideCredentials(opencard.opt.security.SecurityDomain, opencard.opt.security.CredentialBag)"><!-- --></A><H3>
provideCredentials</H3>
<PRE>
public void <B>provideCredentials</B>(opencard.opt.security.SecurityDomain&nbsp;domain,
                               opencard.opt.security.CredentialBag&nbsp;credbag)
                        throws opencard.core.service.CardServiceInvalidParameterException</PRE>
<DL>
<DD>Provides the credentials for a key domain.
 MFC smartcards distinguish key domains, which are basically subtrees of
 the file hierarchies. A key domain can therefore be identified by the
 path to the root directory. Within a key domain, new keys can be defined
 and keys of the enclosing domain can be redefined. Within a key domain,
 the keys are identified by a unique key number.
 <br>
 The credential bag to be passed as the second argument must be prepared
 by the application, so it holds all credentials required to perform the
 commands the application will execute. The bag itself contains one or
 more credential stores, which hold card-specific credentials in
 card and card service specific representations.
 The credentials for MFC card services must be implementations of
 <tt>SignCredential</tt>s, or subinterfaces, and they must be stored in a
 <tt>MFCCredentialStore</tt>, using integers as identifiers.
 <br>
 The relevant credential store will be extracted and evaluated during the
 invocation of this method. If the contents of that store is modified,
 this method must be invoked again to make those changes take effect.<DD><DL>
<DT><B>Specified by: </B><DD>provideCredentials in interface opencard.opt.security.SecureService<DT><B>Parameters:</B><DD><CODE>domain</CODE> - The identifier of the key domain.
                  The MFCCardService requires a CardFilePath to be
                  provided as SecurityDomain.<DD><CODE>credbag</CODE> - The collection of credentials for that domain<DT><B>Throws:</B><DD>opencard.core.service.CardServiceInvalidParameterException - SecurityDomain must be a CardFilePath<DT><B>See Also: </B><DD><CODE>SecurityDomain</CODE>, 
<CODE>CardFilePath</CODE>, 
<CODE>CredentialBag</CODE>, 
<CODE>CredentialStore</CODE>, 
<CODE>SignCredential</CODE>, 
<CODE>com.ibm.opencard.access.SecureCredential</CODE>, 
<A HREF="../../../../com/ibm/opencard/access/MFCCredentialStore.html"><CODE>MFCCredentialStore</CODE></A></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_bottom"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" ID="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT ID="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="package-summary.html"><FONT ID="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" ID="NavBarCell1Rev"> &nbsp;<FONT ID="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="package-tree.html"><FONT ID="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT ID="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT ID="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT ID="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" ID="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../com/ibm/opencard/service/MFCCardObjectInfoCache.html"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../com/ibm/opencard/service/MFCCardServiceParameter.html"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" ID="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="MFCCardService.html" TARGET="_top"><B>NO FRAMES</B></A></FONT></TD>
</TR>
<TR>
<TD VALIGN="top" ID="NavBarCell3"><FONT SIZE="-2">
  SUMMARY: &nbsp;INNER&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" ID="NavBarCell3"><FONT SIZE="-2">
DETAIL: &nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->

<HR>

</BODY>
</HTML>
